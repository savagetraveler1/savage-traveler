html, body, #map { height: 100%; margin: 0; }
#map { position: relative; }

:root{
  --card-bg: rgba(255,255,255,.96);
  --shadow: 0 2px 10px rgba(0,0,0,.10);
  --border: #e5e7eb;
  --text: #111827;
  --muted: #6b7280;
  --pill: 999px;
  --panelW: 360px;

  /* POI colors */
  --c-rest:#8b5cf6;
  --c-roadside:#3b82f6;
  --c-welcome:#8b5e3c;
  --c-other:#9ca3af;

  /* Selected POIs */
  --sel-glow:#f8c24a;

  /* Neon beacons (Start/End) */
  --start-neon:#fb4f14;
  --end-neon:#39ff14;
}

.ui {
  position: absolute; z-index: 3; top: 12px; left: 12px; right: 12px;
  display: grid; grid-template-columns: var(--panelW); gap: 12px;
  font: 14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Arial; color: var(--text);
  pointer-events: none;
}
.panel {
  background: var(--card-bg); border-radius: 14px; padding: 12px; box-shadow: var(--shadow);
  border: 1px solid var(--border); max-height: calc(100vh - 24px); overflow: auto;
  pointer-events: auto;
}
.stat { color: var(--muted) }
button {
  padding:8px 12px; border:1px solid var(--border); background:#fff; border-radius:10px; cursor:pointer;
  box-shadow: 0 1px 3px rgba(0,0,0,.06);
}
button:disabled { opacity:.6; cursor:not-allowed }
.btn-sm { padding:6px 10px; font-size:13px; border-radius:8px; }
.primary { flex:1; border:1px solid var(--border); background:#1a73e8; color:#fff; border-radius:12px; padding:10px 14px; font-weight:600; }
.stack { display:flex; flex-direction:column; gap:12px }
.input-row { display:flex; align-items:center; gap:8px }
.dot { width:10px; height:10px; border-radius:50%; background:#34a853; flex:0 0 10px }
.pin { width:12px; height:12px; border-radius:50%; background:#ea4335; position:relative; flex:0 0 12px }
.pin:after{ content:""; position:absolute; left:50%; top:100%; width:2px; height:8px; background:#ea4335; transform:translateX(-50%); border-radius:1px }
.slot { flex:1 }
.pill {
  display:flex; align-items:center; background:#fff; border:1px solid var(--border);
  border-radius: var(--pill); padding: 8px 12px; box-shadow: var(--shadow);
}
.pill .mapboxgl-ctrl-geocoder { min-width:100%; border:none; box-shadow:none }
.mapboxgl-ctrl-geocoder--input { height: 28px !important; padding:0 !important; border:none !important; box-shadow:none !important; font-size:14px !important; }
.mapboxgl-ctrl-geocoder--icon, .mapboxgl-ctrl-geocoder--icon-loading { display:none !important; }

.mini-links { display:flex; gap:12px; flex-wrap:wrap; }
.divider { height:1px; background:var(--border); margin:6px 0 }
.row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.minutes-row { display:flex; align-items:center; gap:10px; }
.legend { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.legend .item { display:flex; align-items:center; gap:6px; font-size:12px; color: #374151 }
.legend .swatch { width:10px; height:10px; border-radius:50%; border:1px solid #fff; box-shadow:0 0 0 1px rgba(0,0,0,.1) }
.swatch.rest{background:var(--c-rest)} .swatch.road{background:var(--c-roadside)} .swatch.welcome{background:var(--c-welcome)} .swatch.other{background:var(--c-other)}
.filters { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.filters label { display:flex; align-items:center; gap:6px; font-size:12px; border:1px solid var(--border); padding:6px 10px; border-radius:12px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,.04) }
.sel-wrap { border:1px solid var(--border); background:#fff; border-radius:12px; box-shadow:0 1px 2px rgba(0,0,0,.04); max-height:220px; overflow:auto; }
.sel-row { display:flex; align-items:center; gap:8px; padding:8px 10px; border-bottom:1px dashed #eee }
.sel-name { font-weight:600; flex:1; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.linky { font-size:12px; color:#1a73e8; background:none; border:none; padding:0; cursor:pointer }

.error { position: absolute; left: 12px; bottom: 12px; z-index: 4; background:#fff; border-left:4px solid #c00; padding:8px 10px; border-radius:8px; max-width:min(520px,90vw); display:none; box-shadow:var(--shadow) }
.toast { position: fixed; left: 50%; transform: translateX(-50%) translateY(10px); bottom: 20px; background:#111827; color:#fff; padding:10px 14px; border-radius:999px; box-shadow: 0 6px 16px rgba(0,0,0,.2); opacity:0; pointer-events:none; transition: opacity .18s, transform .18s; z-index: 6; font: 13px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial; }
.toast.show { opacity:1; transform: translateX(-50%) translateY(0); }
.busy { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,.25); z-index: 7; }
.busy .card { background:#fff; border:1px solid var(--border); border-radius:12px; padding:12px 16px; box-shadow: var(--shadow); display:flex; align-items:center; gap:10px; font: 14px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Arial; }
.spinner { width:16px; height:16px; border-radius:50%; border:2px solid #e5e7eb; border-top-color:#f59e0b; animation:spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.actions-row { display:flex; gap:8px; }
.actions-row .action {
  flex:1; padding:4px 8px;
  font-size:13px; border:1px solid var(--border);
  background:#1a73e8; color:#fff;
  border-radius:10px; cursor:pointer; box-shadow: 0 1px 3px rgba(0,0,0,.06);
}
.actions-row .action:disabled { opacity:.6; cursor:not-allowed; }

/* Collapsible styles (for source organization) */
details.group { border:1px solid var(--border); border-radius:12px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,.04); }
details.group + details.group { margin-top:8px; }
details.group[open] > summary { border-bottom:1px dashed #eee; }
summary {
  list-style:none;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:10px 12px; font-weight:700; cursor:pointer; user-select:none;
}
summary .hint { font-weight:500; color:var(--muted); font-size:12px; }
summary::marker { display:none; }
.caret { transition: transform .2s ease; }
details[open] .caret { transform: rotate(90deg); }
.group-body { padding:10px 12px; }

/* Dev-only: hide the collapsible UI in the actual app so the live look is unchanged */
details.group { border:0 !important; background:transparent !important; box-shadow:none !important; }
details.group + details.group { margin-top:0 !important; }
details.group[open] > summary, details.group > summary { display:none !important; }
.group-body { padding:0 !important; }
